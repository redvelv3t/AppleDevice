
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wallpaper Tool</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
    <h1>Apple Device Wallpaper Tool</h1>
    <img id="thumbnail" src="thumbnail-wallpaper.jpeg" alt="Wallpaper Thumbnail" class="hidden">
    <div id="info" class="hidden"></div>
    <button id="mainButton">Get Wallpaper</button>
    <button id="copyButton" class="hidden">Copy Screen Size</button>
    <div id="copyMsg" class="hidden">send this to prymus.</div>
    <div class="version">v1.0.2b</div>
</div>

<script>
const devices = {
    "320x568": "iphone-4.0@2x.jpg",
    "375x667": "iphone6-8-family.jpg",
    "414x736": "iphone6-8-plus-family.jpg",
    "375x812": "iphoneX-12mini-family.jpg",
    "390x844": "iphone12-14-family.jpg",
    "430x932": "iphone14plus-15-family.jpg",
    "393x852": "iphone14pro-family.jpg",
    "430x932-pro": "iphone14promax-family.jpg",
    "402x874": "iphone16-family.jpg"
};

let step = 0;
const mainButton = document.getElementById("mainButton");
const copyButton = document.getElementById("copyButton");
const thumbnail = document.getElementById("thumbnail");
const info = document.getElementById("info");
const copyMsg = document.getElementById("copyMsg");

function getScreenKey() {
    return `${window.screen.width}x${window.screen.height}`;
}

mainButton.addEventListener("click", () => {
    if (step === 0) {
        const key = getScreenKey();
        thumbnail.classList.remove("hidden");
        step = 1;

        if (devices[key]) {
            info.textContent = `Detected device family: ${key}`;
            mainButton.textContent = "Download";
            copyButton.classList.add("hidden");
        } else if (/iPad/.test(navigator.userAgent)) {
            info.textContent = "iPad support coming soon.";
            mainButton.textContent = "Download";
        } else if (!/iPhone|iPod/.test(navigator.userAgent)) {
            info.textContent = "Desktop support coming soon.";
            mainButton.textContent = "Download";
        } else {
            info.textContent = `Could not identify device. Screen size: ${key}`;
            copyButton.classList.remove("hidden");
            mainButton.textContent = "Download";
        }
        info.classList.remove("hidden");
    } else if (step === 1) {
        const key = getScreenKey();
        let fileName = devices[key];
        if (fileName) {
            triggerDownload(`wallpaper/${fileName}`);
        } else {
            window.open("wallpaper/wallpaper-master.jpg", "_blank");
        }
    }
});

copyButton.addEventListener("click", () => {
    navigator.clipboard.writeText(getScreenKey()).then(() => {
        copyMsg.classList.remove("hidden");
    });
});

function triggerDownload(url) {
    const a = document.createElement("a");
    a.href = url;
    a.download = url.split("/").pop();
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
}
</script>
</body>
</html>
