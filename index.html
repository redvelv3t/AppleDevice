<!doctype html>
<html lang="en">
<head>
Â Â <meta charset="utf-8" />
Â Â <meta name="viewport" content="width=device-width,initial-scale=1" />
Â Â <title>AC Wallpaper</title>
Â Â <link rel="stylesheet" href="style.css" />
Â Â <meta name="color-scheme" content="light dark">
</head>
<body oncontextmenu="return false">
Â Â <main class="container" aria-live="polite">
Â Â Â Â <div class="thumbCard" aria-hidden="true">
Â Â Â Â Â Â <div class="thumbnail" id="thumbnail"
Â Â Â Â Â Â Â Â Â Â Â ondragstart="return false"></div>
Â Â Â Â </div>

Â Â Â Â <p class="caption" id="caption">Detecting deviceâ€¦</p>

Â Â Â Â <button id="actionBtn" class="btn btn-primary" disabled>
Â Â Â Â Â Â Please wait
Â Â Â Â </button>

Â Â Â Â <div class="actions-row" id="auxActions" hidden>
Â Â Â Â Â Â <button id="copyBtn" class="btn btn-ghost">Copy my screen size</button>
Â Â Â Â Â Â <a id="sendLink" class="btn btn-ghost" href="#" rel="noopener">Send screen size</a>
Â Â Â Â </div>

Â Â Â Â <p class="specs" id="specs" hidden></p>

Â Â Â Â <footer class="footer">v1.0 â€¢ 2025â€‘08â€‘12 â€¢ iPhoneâ€‘only</footer>
Â Â </main>

<script>
/* ------------------ helpers ------------------ */
function isIPadLike(ua, platform, maxTouch) {
Â Â const looksLikeMac = /Macintosh/i.test(ua) || /Mac/i.test(platform || "");
Â Â return looksLikeMac && (maxTouch || 0) > 1; // iPadOS posing as Mac
}
function getIOSVersion(ua) {
Â Â const m1 = /OS (\d+)[._](\d+)(?:[._](\d+))?/.exec(ua);
Â Â if (m1) return [m1[1], m1[2], m1[3]].filter(Boolean).join(".");
Â Â const m2 = /Version\/(\d+)\.(\d+)(?:\.(\d+))?/.exec(ua);
Â Â if (m2 && /Safari/i.test(ua)) return [m2[1], m2[2], m2[3]].filter(Boolean).join(".");
Â Â return null;
}
function normalizeWH(w, h) {
Â Â const min = Math.min(w, h), max = Math.max(w, h);
Â Â return { w:min, h:max };
}
function approxEqual(a, b, tol=1) { return Math.abs(a-b) <= tol; }

/* ------------------ detection ------------------ */
function detectAppleThing() {
Â Â const ua = navigator.userAgent || "";
Â Â const platform = (navigator.platform || (navigator.userAgentData && navigator.userAgentData.platform)) || "";
Â Â const maxTouch = navigator.maxTouchPoints || 0;

Â Â let type = null;
Â Â if (/iPhone/i.test(ua)) type = "iPhone";
Â Â else if (/iPad/i.test(ua)) type = "iPad";
Â Â else if (isIPadLike(ua, platform, maxTouch)) type = "iPad";
Â Â else type = "Other";

Â Â const osVersion = getIOSVersion(ua) || null;

Â Â const dpr = window.devicePixelRatio || 1;
Â Â const { w, h } = normalizeWH(window.screen.width, window.screen.height);
Â Â const nativeW = Math.round(w * dpr), nativeH = Math.round(h * dpr);

Â Â return { type, osVersion, w, h, dpr, nativeW, nativeH, ua, maxTouch };
}

/* ------------------ iPhone family map ------------------ */
/* CSS logical size (portrait) + DPR â†’ filename + label */
const FAMILY_MAP = [
Â Â { w:320, h:568, dpr:2,Â Â key:"iphone-4.0@2x.jpg",Â Â Â Â Â Â Â Â Â Â Â label:'iPhone 4.0â€³ family' },
Â Â { w:375, h:667, dpr:2,Â Â key:"iphone-4.7@2x.jpg",Â Â Â Â Â Â Â Â Â Â Â label:'iPhone 4.7â€³ family' },
Â Â { w:414, h:736, dpr:3,Â Â key:"iphone-5.5@3x.jpg",Â Â Â Â Â Â Â Â Â Â Â label:'iPhone 5.5â€³ Plus family' },
Â Â { w:375, h:812, dpr:3,Â Â key:"iphone-5.8@3x.jpg",Â Â Â Â Â Â Â Â Â Â Â label:'iPhone 5.8â€³ family' },
Â Â { w:414, h:896, dpr:2,Â Â key:"iphone-6.1-old@2x.jpg",Â Â Â Â Â Â Â label:'iPhone 6.1â€³ (XR/11) family' },
Â Â { w:414, h:896, dpr:3,Â Â key:"iphone-6.5@3x.jpg",Â Â Â Â Â Â Â Â Â Â Â label:'iPhone 6.5â€³ family' },
Â Â { w:360, h:780, dpr:3,Â Â key:"iphone-5.4@3x.jpg",Â Â Â Â Â Â Â Â Â Â Â label:'iPhone 5.4â€³ mini family' },
Â Â { w:390, h:844, dpr:3,Â Â key:"iphone-6.1@3x.jpg",Â Â Â Â Â Â Â Â Â Â Â label:'iPhone 6.1â€³ (12/13/14/15/16) family' },
Â Â { w:428, h:926, dpr:3,Â Â key:"iphone-6.7@3x.jpg",Â Â Â Â Â Â Â Â Â Â Â label:'iPhone 6.7â€³ (12â€“16 Plus/Pro Max) family' },
Â Â { w:393, h:852, dpr:3,Â Â key:"iphone-6.1-pro@3x.jpg",Â Â Â Â Â Â Â label:'iPhone 6.1â€³ Pro family' },
Â Â { w:430, h:932, dpr:3,Â Â key:"iphone-6.7-pro-max@3x.jpg",Â Â Â label:'iPhone 6.7â€³ Pro Max family' },
];

function matchIPhoneFamily(w, h, dpr) {
Â Â for (const f of FAMILY_MAP) {
Â Â Â Â if (approxEqual(f.w, w) && approxEqual(f.h, h) && approxEqual(f.dpr, dpr, 0.25)) {
Â Â Â Â Â Â return f;
Â Â Â Â }
Â Â }
Â Â return null;
}

/* ------------------ UI wiring ------------------ */
const captionEl = document.getElementById('caption');
const btn = document.getElementById('actionBtn');
const specsEl = document.getElementById('specs');
const aux = document.getElementById('auxActions');
const copyBtn = document.getElementById('copyBtn');
const sendLink = document.getElementById('sendLink');

function setButton(label, href, disabled=false) {
Â Â btn.textContent = label;
Â Â if (href) {
Â Â Â Â btn.onclick = () => { window.location.href = href; };
Â Â } else {
Â Â Â Â btn.onclick = null;
Â Â }
Â Â btn.disabled = !!disabled;
}

function makeIssueURL(payload) {
Â Â const base = 'https://github.com/your-user/your-repo/issues/new';
Â Â const title = encodeURIComponent(`Add support: ${payload.w}Ã—${payload.h} CSS, DPR ${payload.dpr}`);
Â Â const body = encodeURIComponent(
`Device type guess: ${payload.type}
CSS size: ${payload.w}Ã—${payload.h}
Native size: ${payload.nativeW}Ã—${payload.nativeH}
DPR: ${payload.dpr}
iOS/iPadOS: ${payload.osVersion || 'unknown'}
UA: ${payload.ua}
maxTouchPoints: ${payload.maxTouch}
Page version: v1.0 (2025-08-12)`
Â Â );
Â Â return `${base}?title=${title}&body=${body}`;
}

function render() {
Â Â const info = detectAppleThing();
Â Â const cssLabel = `${info.w}Ã—${info.h} CSS`;
Â Â const nativeLabel = `${info.nativeW}Ã—${info.nativeH} px`;
Â Â const dprLabel = `DPR ${info.dpr}`;

Â Â // Always show specs for iPhone; for others, keep it hidden
Â Â const specsStr = `${cssLabel} â€¢ ${nativeLabel} â€¢ ${dprLabel}${info.osVersion ? ` â€¢ iOS/iPadOS ${info.osVersion}` : ''}`;

Â Â if (info.type === 'iPhone') {
Â Â Â Â const fam = matchIPhoneFamily(info.w, info.h, info.dpr);

Â Â Â Â specsEl.hidden = false;
Â Â Â Â specsEl.textContent = specsStr;

Â Â Â Â if (fam) {
Â Â Â Â Â Â captionEl.textContent = `Detected: ${fam.label}`;
Â Â Â Â Â Â setButton('Get wallpaper', `wallpaper/${fam.key}`, false);
Â Â Â Â Â Â aux.hidden = true; // no need for copy/send
Â Â Â Â } else {
Â Â Â Â Â Â captionEl.textContent = 'Could not identify device';
Â Â Â Â Â Â setButton('Use original wallpaper', 'wallpaper/wallpaper-master.jpg', false);
Â Â Â Â Â Â // show copy/send helpers
Â Â Â Â Â Â aux.hidden = false;

Â Â Â Â Â Â const clip = `iPhone: unknown â€¢ ${cssLabel} â€¢ ${nativeLabel} â€¢ ${dprLabel} â€¢ UA: ${info.ua}`;
Â Â Â Â Â Â copyBtn.onclick = async () => {
Â Â Â Â Â Â Â Â try {
Â Â Â Â Â Â Â Â Â Â await navigator.clipboard.writeText(clip);
Â Â Â Â Â Â Â Â Â Â copyBtn.textContent = 'Copied!';
Â Â Â Â Â Â Â Â Â Â setTimeout(()=>copyBtn.textContent='Copy my screen size', 1500);
Â Â Â Â Â Â Â Â } catch {
Â Â Â Â Â Â Â Â Â Â copyBtn.textContent = 'Copy failed';
Â Â Â Â Â Â Â Â Â Â setTimeout(()=>copyBtn.textContent='Copy my screen size', 1500);
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â };
Â Â Â Â Â Â sendLink.href = makeIssueURL(info);
Â Â Â Â }
Â Â } else if (info.type === 'iPad') {
Â Â Â Â captionEl.textContent = 'iPad support coming soon ðŸ‘€';
Â Â Â Â setButton('iPad not supported yet', null, true);
Â Â Â Â aux.hidden = true;
Â Â Â Â specsEl.hidden = true; // keep UI minimal for iPad
Â Â } else {
Â Â Â Â captionEl.textContent = 'This tool is for iPhone. Desktop support coming soon.';
Â Â Â Â setButton('Desktop not supported yet', null, true);
Â Â Â Â aux.hidden = true;
Â Â Â Â specsEl.hidden = true;
Â Â }
}

// Re-run if the user rotates the phone
window.addEventListener('orientationchange', () => setTimeout(render, 250), { passive:true });

// Initial run
render();
</script>
</body>
</html>