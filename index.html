
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wallpaper Tool</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
    <h1>Apple Device Wallpaper Tool</h1>
    <img id="thumbnail" src="thumbnail-wallpaper.jpeg" alt="Wallpaper Thumbnail" class="hidden">
    <div id="info" class="hidden"></div>
    <button id="mainButton">Get Wallpaper</button>
    <button id="copyButton" class="hidden">Copy Screen Size</button>
    <div id="copyMsg" class="hidden">send this to prymus.</div>
    <div class="version">v1.0.2b</div>
</div>

<script>
const wallpapers = {
  "640x1136": "wallpaper/iphone-4.0@2x.jpg",
  "750x1334": "wallpaper/iphone-4.7@2x.jpg",
  "1242x2208": "wallpaper/iphone-5.5@3x.jpg",
  "1125x2436": "wallpaper/iphone-5.8@3x.jpg",
  "828x1792": "wallpaper/iphone-6.1-old@2x.jpg", // XR / 11
  "1242x2688": "wallpaper/iphone-6.5@3x.jpg",     // XS Max / 11 Pro Max
  "1080x2340": "wallpaper/iphone-5.4@3x.jpg",     // 12 / 13 mini
  "1170x2532": "wallpaper/iphone-6.1@3x.jpg",     // 12 / 13 / 14 / 15 / 16
  "1284x2778": "wallpaper/iphone-6.7@3x.jpg",     // 12PM / 13PM / 14+ / 14PM / 15+
  "1179x2556": "wallpaper/iphone-6.1-pro@3x.jpg", // 14 Pro / 15 Pro / 16 Pro
  "1290x2796": "wallpaper/iphone-6.7-pro-max@3x.jpg" // 14 Pro Max / 15 Pro Max / 16 Pro Max
};

let step = 0;
const mainButton = document.getElementById("mainButton");
const copyButton = document.getElementById("copyButton");
const thumbnail = document.getElementById("thumbnail");
const info = document.getElementById("info");
const copyMsg = document.getElementById("copyMsg");

function getScreenKey() {
    return `${window.screen.width}x${window.screen.height}`;
}

mainButton.addEventListener("click", () => {
    if (step === 0) {
        const key = getScreenKey();
        thumbnail.classList.remove("hidden");
        step = 1;

        if (devices[key]) {
            info.textContent = `Detected device family: ${key}`;
            mainButton.textContent = "Download";
            copyButton.classList.add("hidden");
        } else if (/iPad/.test(navigator.userAgent)) {
            info.textContent = "iPad support coming soon.";
            mainButton.textContent = "Download";
        } else if (!/iPhone|iPod/.test(navigator.userAgent)) {
            info.textContent = "Desktop support coming soon.";
            mainButton.textContent = "Download";
        } else {
            info.textContent = `Could not identify device. Screen size: ${key}`;
            copyButton.classList.remove("hidden");
            mainButton.textContent = "Download";
        }
        info.classList.remove("hidden");
    } else if (step === 1) {
        const key = getScreenKey();
        let fileName = devices[key];
        if (fileName) {
            triggerDownload(`wallpaper/${fileName}`);
        } else {
            window.open("wallpaper/wallpaper-master.jpg", "_blank");
        }
    }
});

copyButton.addEventListener("click", () => {
    navigator.clipboard.writeText(getScreenKey()).then(() => {
        copyMsg.classList.remove("hidden");
    });
});

function triggerDownload(url) {
    const a = document.createElement("a");
    a.href = url;
    a.download = url.split("/").pop();
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
}
</script>
</body>
</html>
